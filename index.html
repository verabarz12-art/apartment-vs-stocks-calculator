<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Apartment vs. Stocks — Investment Calculator</title>
  <meta name="description" content="Compare investing in an apartment vs investing the same initial capital in stocks." />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png" />

  <style>
    :root{
      --blue:#4338CA;
      --cream:#FFFCFB;
      --pink:#FFD8D8;
      --red:#ED3500;
      --bg: var(--cream);
      --panel: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --border: rgba(0,0,0,.08);
      --shadow: 0 20px 60px rgba(67,56,202,.15);
      --r: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background: var(--bg);
      line-height:1.45;
    }
    .wrap{max-width:1200px; margin:0 auto; padding:28px}
    header{display:flex; justify-content:space-between; gap:20px; margin-bottom:22px; flex-wrap:wrap;}
    .title h1{margin:0; font-size:28px; color:var(--blue)}
    .title p{margin:8px 0 0; color:var(--muted)}
    .badge{padding:10px 12px; border:1px solid rgba(67,56,202,.25); border-radius:999px; color:var(--blue); font-size:13px; font-weight:600;}
    .grid{display:grid; grid-template-columns: 1.2fr 1fr; gap:18px; align-items:start;}
    @media (max-width: 900px){.grid{grid-template-columns:1fr}}
    .panel{background:#fff; border:1px solid var(--border); border-radius: var(--r); box-shadow: var(--shadow); padding:18px;}
    .panel.inputs{background:#FBEFEF; border-color: rgba(237,53,0,.1); box-shadow:none;}
    h2{font-size:16px; color:var(--blue); margin:0 0 12px}
    .subpanel{border:1px solid var(--border); border-radius:16px; padding:14px; margin-bottom:12px; background:#fff;}
    h3{font-size:14px; color:var(--blue); margin:0 0 10px}
    .form{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
    @media (max-width:600px){.form{grid-template-columns:1fr}}
    label{font-size:12px; color:var(--muted); display:block; margin-bottom:6px}
    input{width:100%; padding:11px 12px; border-radius:12px; border:1px solid var(--border); font-size:16px;}
    input:focus{outline:none; border-color:var(--blue); box-shadow:0 0 0 3px rgba(67,56,202,.15);}    
    button{padding:11px 14px; border-radius:12px; border:1px solid var(--blue); background:var(--blue); color:#fff; font-weight:700; cursor:pointer;}
    button.secondary{background:#fff; color:var(--blue);}    
    .cards{display:grid; gap:12px}
    .card{border:1px solid var(--border); border-radius:16px; padding:14px; background:#fff;}
    .kpi{display:grid; grid-template-columns:1fr 1fr; gap:10px;}
    .kpi .item{border:1px solid var(--border); border-radius:14px; padding:10px;}
    .kpi .span2{grid-column:1/-1}
    .k{font-size:11px; color:var(--muted)}
    .v{font-size:16px; margin-top:6px}
    .decision{display:flex; justify-content:space-between; gap:20px; margin-top:18px; padding:22px; border-radius:18px; border:1px solid rgba(67,56,202,.2); background:linear-gradient(135deg, rgba(67,56,202,.06), rgba(255,216,216,.55));}
    .pill{border:1px solid rgba(67,56,202,.4); border-radius:999px; padding:12px 16px; color:var(--blue); font-weight:600;}
    footer{margin-top:20px; font-size:12px; color:var(--muted);}
  </style>
</head>
<body>
<div class="wrap">
<header>
  <div class="title">
    <h1>Apartment vs. Stocks — Investment Calculator</h1>
    <p>Compare two investment options using your initial capital.</p>
  </div>
  <div class="badge">All amounts in USD</div>
</header>

<div class="grid">
<section class="panel inputs">
  <h2>Current Data Input</h2>

  <div class="subpanel">
    <h3>Mortgage Calculation</h3>
    <div class="form">
      <div>
        <label>Initial Capital / Down Payment</label>
        <input id="downPayment" value="$300,000">
      </div>
      <div>
        <label>Total Apartment Price</label>
        <input id="apartmentPrice" value="$1,200,000">
      </div>
      <div>
        <label>Mortgage Interest Rate (%)</label>
        <input id="mortgageRate" value="5%">
      </div>
      <div>
        <label>Fixed Monthly Mortgage Payment</label>
        <input id="monthlyMortgage" value="$4,500">
      </div>
      <div>
        <label>Monthly Rent</label>
        <input id="monthlyRent" value="$4,500">
      </div>
      <div>
        <label>Years of Apartment Ownership</label>
        <input id="years" type="number" step="0.5" value="2">
      </div>
      <div>
        <label>Apartment Selling Price</label>
        <input id="sellPrice" value="$1,370,000">
      </div>
    </div>
  </div>

  <div class="subpanel">
    <h3>Stocks Investment</h3>
    <div class="form">
      <div>
        <label>Stocks Yearly Return (%)</label>
        <input id="stockGrowth" value="8%">
      </div>
    </div>
  </div>

  <div style="margin-top:12px">
    <button onclick="calculate()">Calculate</button>
    <button class="secondary" onclick="location.reload()">Reset</button>
  </div>
</section>

<section class="panel">
  <h2>Results</h2>

  <div class="cards">
    <div class="card">
      <h3>Mortgage Calculation</h3>
      <div class="kpi">
        <div class="item"><div class="k">Total Mortgage</div><div class="v" id="mortgageTotal">—</div></div>
        <div class="item"><div class="k">Paid Mortgage so far</div><div class="v" id="mortgagePaid">—</div></div>
      </div>
    </div>

    <div class="card">
      <h3>Apartment Margin</h3>
      <div class="kpi">
        <div class="item"><div class="k">Margin from Selling</div><div class="v" id="aptSell">—</div></div>
        <div class="item"><div class="k">Margin from Rent</div><div class="v" id="aptRent">—</div></div>
        <div class="item span2"><div class="k">Total Profit/Loss</div><div class="v" id="aptTotal">—</div></div>
        <div class="item"><div class="k">Profit/Loss per Year</div><div class="v" id="aptPerYear">—</div></div>
        <div class="item"><div class="k">Profit/Loss per Month</div><div class="v" id="aptPerMonth">—</div></div>
        <div class="item span2"><div class="k">Annual Return (%)</div><div class="v" id="aptReturn">—</div></div>
      </div>
    </div>

    <div class="card">
      <h3>Stocks Margin</h3>
      <div class="kpi">
        <div class="item span2"><div class="k">Total Profit/Loss (Compounded)</div><div class="v" id="stocksTotal">—</div></div>
        <div class="item"><div class="k">Profit/Loss per Year</div><div class="v" id="stocksPerYear">—</div></div>
        <div class="item"><div class="k">Profit/Loss per Month</div><div class="v" id="stocksPerMonth">—</div></div>
        <div class="item span2"><div class="k">Annual Return (%)</div><div class="v" id="stocksReturn">—</div></div>
      </div>
    </div>
  </div>
</section>
</div>

<section class="panel">
  <h2>Final Decision</h2>
  <div class="decision">
    <div>
      <div class="k">Total Additional Margin</div>
      <div class="v" id="difference">—</div>
    </div>
    <div class="pill" id="decision">—</div>
  </div>
</section>

<footer>
  This calculator is for educational purposes only and does not constitute financial advice.
</footer>
</div>

<script>
  const $ = (id) => document.getElementById(id);

  function num(v){
    if (v == null) return NaN;
    const s = String(v);
    const cleaned = s.replace(/[^0-9.-]/g,'');
    const n = Number(cleaned);
    return Number.isFinite(n) ? n : NaN;
  }

  function plainInt(n){
    return new Intl.NumberFormat('en-US', { maximumFractionDigits:0 }).format(Math.round(n));
  }

  function money(n){
    if (!Number.isFinite(n)) return '—';
    const sign = n < 0 ? '-' : '';
    return `${sign}$${plainInt(Math.abs(n))}`;
  }

  function pct(n01){
    if (!Number.isFinite(n01)) return '—';
    return new Intl.NumberFormat('en-US', { style:'percent', maximumFractionDigits:2 }).format(n01);
  }

  function formatMoneyInput(id){
    const el = $(id);
    if (!el) return;
    const n = num(el.value);
    if (!Number.isFinite(n)) return;
    el.value = money(n);
  }

  function formatPercentInput(id){
    const el = $(id);
    if (!el) return;
    const n = num(el.value);
    if (!Number.isFinite(n)) return;
    el.value = `${n}%`;
  }

  function setText(id, text){
    const el = $(id);
    if (!el) return;
    el.textContent = text;
  }

  function calculate(){
    const down = num($('downPayment')?.value);
    const price = num($('apartmentPrice')?.value);
    const rate = num($('mortgageRate')?.value) / 100; // 5% -> 0.05
    const monthly = num($('monthlyMortgage')?.value);
    const rent = num($('monthlyRent')?.value);
    const years = Number($('years')?.value);
    const sell = num($('sellPrice')?.value);
    const stockRate = num($('stockGrowth')?.value) / 100;

    const required = [down, price, rate, monthly, rent, years, sell, stockRate];
    if (required.some(v => !Number.isFinite(v))){
      alert('Please fill all fields with valid numbers.');
      return;
    }
    if (years <= 0){
      alert('Years of Apartment Ownership must be greater than 0.');
      return;
    }
    if (price < down){
      alert('Total Apartment Price should be greater than or equal to Initial Capital / Down Payment.');
      return;
    }

    // Monthly margin (computed, not shown in UI)
    const rentMarginMonthly = rent - monthly;
    const months = years * 12;

    // Mortgage principal + interest (interest added on top of 100%)
    const mortgageAmount = (price - down) * (1 + rate);
    const paidMortgage = monthly * months;

    // Apartment profits (not compounded)
    const marginSelling = sell - down - mortgageAmount;
    const marginRent = rentMarginMonthly * months;
    const aptTotal = marginSelling + marginRent;

    const aptPerYear = aptTotal / years;
    const aptPerMonth = aptPerYear / 12;
    const aptAnnual = aptPerYear / down;

    // Stocks profit (compounded)
    const stocksTotal = (down * Math.pow(1 + stockRate, years)) - down;
    const stocksPerYear = stocksTotal / years;
    const stocksPerMonth = stocksPerYear / 12;
    const stocksAnnual = stocksPerYear / down;

    // Final decision
    const diff = aptTotal - stocksTotal;

    setText('mortgageTotal', money(mortgageAmount));
    setText('mortgagePaid', money(paidMortgage));

    setText('aptSell', money(marginSelling));
    setText('aptRent', money(marginRent));
    setText('aptTotal', money(aptTotal));
    setText('aptPerYear', money(aptPerYear));
    setText('aptPerMonth', money(aptPerMonth));
    setText('aptAnnual', pct(aptAnnual));

    setText('stocksTotal', money(stocksTotal));
    setText('stocksPerYear', money(stocksPerYear));
    setText('stocksPerMonth', money(stocksPerMonth));
    setText('stocksAnnual', pct(stocksAnnual));

    setText('difference', money(diff));

    const decision = $('decision');
    const decisionText = $('decisionText');
    if (decision){
      if (diff > 0) decision.textContent = 'Apartment';
      else if (diff < 0) decision.textContent = 'Stocks';
      else decision.textContent = 'Equal Outcome';
    }
    if (decisionText){
      const abs = Math.abs(diff);
      if (diff > 0) decisionText.textContent = `You will gain an additional margin of ${money(abs)} if you invest your initial capital in Apartment.`;
      else if (diff < 0) decisionText.textContent = `You will gain an additional margin of ${money(abs)} if you invest your initial capital in Stocks.`;
      else decisionText.textContent = 'Both investment options result in the same total margin.';
    }
  }

  // Bind buttons (so it works even if onclick attributes change)
  window.calculate = calculate;

  // Format on blur
  ['downPayment','apartmentPrice','monthlyMortgage','monthlyRent','sellPrice'].forEach(id => {
    const el = $(id);
    if (!el) return;
    el.addEventListener('blur', () => formatMoneyInput(id));
  });
  ['mortgageRate','stockGrowth'].forEach(id => {
    const el = $(id);
    if (!el) return;
    el.addEventListener('blur', () => formatPercentInput(id));
  });

  // Auto-calc on load
  window.addEventListener('load', () => {
    // normalize formatting once
    ['downPayment','apartmentPrice','monthlyMortgage','monthlyRent','sellPrice'].forEach(formatMoneyInput);
    ['mortgageRate','stockGrowth'].forEach(formatPercentInput);
    calculate();
  });
</script>
</body>
</html>
